{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{assessmentsApi}from'../services/mockData';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AssessmentList=_ref=>{let{onCreateAssessment}=_ref;const[assessments,setAssessments]=useState([]);const[jobs,setJobs]=useState([]);const[loading,setLoading]=useState(true);const isMountedRef=useRef(true);useEffect(()=>{loadData();return()=>{isMountedRef.current=false;};},[]);const loadData=async()=>{try{setLoading(true);// Load jobs\nconst jobsResponse=await fetch('/api/jobs?page=1&pageSize=100');if(jobsResponse.ok){const jobsData=await jobsResponse.json();setJobs(jobsData.data);}// Load existing assessments\nconst assessmentsPromises=jobs.map(async job=>{try{const assessment=await assessmentsApi.getAssessment(job.id);return assessment;}catch(_unused){return null;}});const assessmentsResults=await Promise.all(assessmentsPromises);const validAssessments=assessmentsResults.filter(a=>a!==null);setAssessments(validAssessments);}catch(error){console.error('Error loading data:',error);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading assessments...\"})]})});}const jobsWithoutAssessments=jobs.filter(job=>!assessments.some(assessment=>assessment.jobId===job.id));return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title\",children:\"Assessment Builder\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-input\",onChange:e=>{if(e.target.value&&onCreateAssessment){onCreateAssessment(e.target.value);}},defaultValue:\"\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Create Assessment for Job\"}),jobsWithoutAssessments.map(job=>/*#__PURE__*/_jsx(\"option\",{value:job.id,children:job.title},job.id))]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-2\",children:assessments.map(assessment=>{const job=jobs.find(j=>j.id===assessment.jobId);return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2\",children:assessment.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2 text-sm text-gray-600\",children:[\"Job: \",(job===null||job===void 0?void 0:job.title)||'Unknown Job']}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-3 text-gray-600\",children:assessment.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Sections:\"}),\" \",assessment.sections.length]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Questions:\"}),\" \",assessment.sections.reduce((total,section)=>total+section.questions.length,0)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>onCreateAssessment&&onCreateAssessment(assessment.jobId),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",children:\"Preview\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",children:\"Publish\"})]})]},assessment.id);})}),assessments.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center p-6\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No assessments found. Select a job above to create your first assessment.\"})})]})});};export default AssessmentList;","map":{"version":3,"names":["React","useState","useEffect","useRef","assessmentsApi","jsx","_jsx","jsxs","_jsxs","AssessmentList","_ref","onCreateAssessment","assessments","setAssessments","jobs","setJobs","loading","setLoading","isMountedRef","loadData","current","jobsResponse","fetch","ok","jobsData","json","data","assessmentsPromises","map","job","assessment","getAssessment","id","_unused","assessmentsResults","Promise","all","validAssessments","filter","a","error","console","className","children","jobsWithoutAssessments","some","jobId","onChange","e","target","value","defaultValue","title","find","j","description","sections","length","reduce","total","section","questions","onClick"],"sources":["C:/Users/shiva/Desktop/talentflow-mini-hiring-platform/TalentFlow/src/components/AssessmentList.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { assessmentsApi } from '../services/mockData';\nimport { Job } from '../types';\n\ninterface Assessment {\n  id: string;\n  jobId: string;\n  title: string;\n  description: string;\n  sections: any[];\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface AssessmentListProps {\n  onCreateAssessment?: (jobId: string) => void;\n}\n\nconst AssessmentList: React.FC<AssessmentListProps> = ({ onCreateAssessment }) => {\n  const [assessments, setAssessments] = useState<Assessment[]>([]);\n  const [jobs, setJobs] = useState<Job[]>([]);\n  const [loading, setLoading] = useState(true);\n  const isMountedRef = useRef(true);\n\n  useEffect(() => {\n    loadData();\n\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  const loadData = async () => {\n    try {\n      setLoading(true);\n\n      // Load jobs\n      const jobsResponse = await fetch('/api/jobs?page=1&pageSize=100');\n      if (jobsResponse.ok) {\n        const jobsData = await jobsResponse.json();\n        setJobs(jobsData.data);\n      }\n\n      // Load existing assessments\n      const assessmentsPromises = jobs.map(async (job) => {\n        try {\n          const assessment = await assessmentsApi.getAssessment(job.id);\n          return assessment;\n        } catch {\n          return null;\n        }\n      });\n\n      const assessmentsResults = await Promise.all(assessmentsPromises);\n      const validAssessments = assessmentsResults.filter(a => a !== null) as Assessment[];\n      setAssessments(validAssessments);\n\n    } catch (error) {\n      console.error('Error loading data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container\">\n        <div className=\"loading\">\n          <div className=\"spinner\"></div>\n          <p>Loading assessments...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const jobsWithoutAssessments = jobs.filter(job =>\n    !assessments.some(assessment => assessment.jobId === job.id)\n  );\n\n  return (\n    <div className=\"container\">\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <h2 className=\"card-title\">Assessment Builder</h2>\n          <div className=\"flex gap-2\">\n            <select\n              className=\"form-input\"\n              onChange={(e) => {\n                if (e.target.value && onCreateAssessment) {\n                  onCreateAssessment(e.target.value);\n                }\n              }}\n              defaultValue=\"\"\n            >\n              <option value=\"\">Create Assessment for Job</option>\n              {jobsWithoutAssessments.map(job => (\n                <option key={job.id} value={job.id}>\n                  {job.title}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        <div className=\"grid grid-2\">\n          {assessments.map(assessment => {\n            const job = jobs.find(j => j.id === assessment.jobId);\n            return (\n              <div key={assessment.id} className=\"card\">\n                <h3 className=\"text-lg font-semibold mb-2\">{assessment.title}</h3>\n                <p className=\"mb-2 text-sm text-gray-600\">\n                  Job: {job?.title || 'Unknown Job'}\n                </p>\n                <p className=\"mb-3 text-gray-600\">{assessment.description}</p>\n\n                <div className=\"mb-3\">\n                  <strong>Sections:</strong> {assessment.sections.length}\n                </div>\n\n                <div className=\"mb-3\">\n                  <strong>Questions:</strong> {assessment.sections.reduce((total, section) => total + section.questions.length, 0)}\n                </div>\n\n                <div className=\"flex gap-2\">\n                  <button\n                    className=\"btn btn-primary\"\n                    onClick={() => onCreateAssessment && onCreateAssessment(assessment.jobId)}\n                  >\n                    Edit\n                  </button>\n                  <button className=\"btn btn-secondary\">Preview</button>\n                  <button className=\"btn btn-success\">Publish</button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {assessments.length === 0 && (\n          <div className=\"text-center p-6\">\n            <p>No assessments found. Select a job above to create your first assessment.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AssessmentList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}