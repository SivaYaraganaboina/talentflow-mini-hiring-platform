{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{useNavigate}from'react-router-dom';import{MagnifyingGlassIcon,FunnelIcon,EnvelopeIcon,PhoneIcon,CalendarIcon,BriefcaseIcon}from'@heroicons/react/24/outline';import{apiCall}from'../utils/apiUtils';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PAGE_SIZE=12;const CandidateListProfessional=()=>{const[candidates,setCandidates]=useState([]);const[allCandidates,setAllCandidates]=useState([]);const[jobs,setJobs]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[stageFilter,setStageFilter]=useState('');const[jobFilter,setJobFilter]=useState('');const[page,setPage]=useState(1);const navigate=useNavigate();const stages=[{value:'applied',label:'Applied',color:'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'},{value:'screen',label:'Screening',color:'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'},{value:'tech',label:'Technical',color:'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200'},{value:'offer',label:'Offer',color:'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'},{value:'hired',label:'Hired',color:'bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200'},{value:'rejected',label:'Rejected',color:'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'}];useEffect(()=>{loadData();},[]);const filteredCandidates=useMemo(()=>{let filtered=allCandidates;if(searchTerm.trim()){const searchLower=searchTerm.toLowerCase().trim();filtered=filtered.filter(candidate=>candidate.name.toLowerCase().includes(searchLower)||candidate.email.toLowerCase().includes(searchLower)||candidate.phone.toLowerCase().includes(searchLower));}if(stageFilter){filtered=filtered.filter(candidate=>candidate.stage===stageFilter);}if(jobFilter){filtered=filtered.filter(candidate=>candidate.jobId===jobFilter);}return filtered;},[allCandidates,searchTerm,stageFilter,jobFilter]);const paginatedCandidates=useMemo(()=>{const startIndex=(page-1)*PAGE_SIZE;return filteredCandidates.slice(startIndex,startIndex+PAGE_SIZE);},[filteredCandidates,page]);const totalPages=Math.ceil(filteredCandidates.length/PAGE_SIZE);const loadData=async()=>{try{setLoading(true);// Load candidates\nconst candidatesResponse=await apiCall('/api/candidates?page=1&pageSize=1000');if(candidatesResponse.ok){const candidatesData=await candidatesResponse.json();setAllCandidates(candidatesData.data);setCandidates(candidatesData.data);}// Load jobs for filter\nconst jobsResponse=await apiCall('/api/jobs?page=1&pageSize=1000');if(jobsResponse.ok){const jobsData=await jobsResponse.json();setJobs(jobsData.data);}}catch(error){console.error('Error loading data:',error);toast.error('Failed to load candidates');}finally{setLoading(false);}};const openCandidateProfile=candidate=>{navigate(\"/candidates/\".concat(candidate.id));};const handleRefresh=()=>{loadData();};const getStageInfo=stage=>{return stages.find(s=>s.value===stage)||stages[0];};const getJobTitle=jobId=>{const job=jobs.find(j=>j.id===jobId);return(job===null||job===void 0?void 0:job.title)||'Unknown Position';};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Loading candidates...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 dark:text-white mb-2\",children:\"Candidates\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:[\"Manage your candidate pipeline \\u2022 \",filteredCandidates.length,\" candidates found\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search candidates...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:stageFilter,onChange:e=>setStageFilter(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Stages\"}),stages.map(stage=>/*#__PURE__*/_jsx(\"option\",{value:stage.value,children:stage.label},stage.value))]}),/*#__PURE__*/_jsxs(\"select\",{value:jobFilter,onChange:e=>setJobFilter(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Jobs\"}),jobs.map(job=>/*#__PURE__*/_jsx(\"option\",{value:job.id,children:job.title},job.id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-500 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(FunnelIcon,{className:\"w-4 h-4 mr-2\"}),filteredCandidates.length,\" of \",allCandidates.length,\" candidates\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:paginatedCandidates.map(candidate=>{var _candidate$timeline;const stageInfo=getStageInfo(candidate.stage);return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>openCandidateProfile(candidate),className:\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 transition-all duration-200 hover:shadow-md hover:border-blue-300 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-lg\",children:candidate.name.charAt(0).toUpperCase()})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white\",children:candidate.name}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded-full \".concat(stageInfo.color),children:stageInfo.label})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(EnvelopeIcon,{className:\"w-4 h-4 mr-2 text-gray-400\"}),/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(candidate.email),className:\"hover:text-blue-600 dark:hover:text-blue-400 transition-colors\",children:candidate.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(PhoneIcon,{className:\"w-4 h-4 mr-2 text-gray-400\"}),/*#__PURE__*/_jsx(\"a\",{href:\"tel:\".concat(candidate.phone),className:\"hover:text-blue-600 dark:hover:text-blue-400 transition-colors\",children:candidate.phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(BriefcaseIcon,{className:\"w-4 h-4 mr-2 text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{children:getJobTitle(candidate.jobId)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"w-4 h-4 mr-2 text-gray-400\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Applied \",new Date(candidate.appliedAt).toLocaleDateString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Resume\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 dark:bg-gray-700 rounded-lg p-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 line-clamp-3\",children:candidate.resume})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-blue-600 dark:text-blue-400\",children:\"Click for details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[((_candidate$timeline=candidate.timeline)===null||_candidate$timeline===void 0?void 0:_candidate$timeline.length)||0,\" activities\"]})]})]},candidate.id);})}),filteredCandidates.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-2\",children:\"No candidates found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-6\",children:searchTerm||stageFilter||jobFilter?'Try adjusting your filters to see more results.':'No candidates have applied yet.'})]}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center space-x-4 mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:page===1,onClick:()=>setPage(page-1),className:\"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[\"Page \",page,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{disabled:page===totalPages,onClick:()=>setPage(page+1),className:\"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:\"Next\"})]})]})});};export default CandidateListProfessional;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}