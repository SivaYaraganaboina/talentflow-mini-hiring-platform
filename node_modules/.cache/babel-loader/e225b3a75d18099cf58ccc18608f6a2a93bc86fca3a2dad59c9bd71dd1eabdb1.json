{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{Link}from'react-router-dom';import{motion}from'framer-motion';import{BriefcaseIcon,UserGroupIcon,DocumentTextIcon,ClockIcon,CheckCircleIcon,ArrowPathIcon}from'@heroicons/react/24/outline';import{apiCall}from'../utils/apiUtils';import{useAuth}from'../store';import AnalyticsDashboard from'../components/AnalyticsDashboard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HRDashboard=()=>{const{user}=useAuth();const[stats,setStats]=useState({totalJobs:0,activeJobs:0,archivedJobs:0,totalCandidates:0,activeCandidates:0,hiredCandidates:0,rejectedCandidates:0,recentApplications:0,todayApplications:0,totalAssessments:0,pendingReviews:0});const[recentJobs,setRecentJobs]=useState([]);const[recentCandidates,setRecentCandidates]=useState([]);const[loading,setLoading]=useState(true);const[lastUpdated,setLastUpdated]=useState(new Date());const loadDashboardData=useCallback(async()=>{try{setLoading(true);console.log('Loading dashboard data...');// Load all data in parallel\nconst[jobsResponse,candidatesResponse]=await Promise.all([apiCall('/api/jobs?page=1&pageSize=1000'),apiCall('/api/candidates?page=1&pageSize=2000')]);let jobs=[];let candidates=[];// Process jobs\nif(jobsResponse.ok){const jobsData=await jobsResponse.json();jobs=jobsData.data||[];console.log('Jobs loaded:',jobs.length);setRecentJobs(jobs.slice(0,5));}else{console.error('Failed to load jobs:',jobsResponse.status);}// Process candidates\nif(candidatesResponse.ok){const candidatesData=await candidatesResponse.json();candidates=candidatesData.data||[];console.log('Candidates loaded:',candidates.length);setRecentCandidates(candidates.slice(0,5));}else{console.error('Failed to load candidates:',candidatesResponse.status);}// Calculate real-time statistics\nconst now=new Date();const today=new Date(now.getFullYear(),now.getMonth(),now.getDate());const weekAgo=new Date(now.getTime()-7*24*60*60*1000);const activeJobs=jobs.filter(job=>job.status==='active').length;const archivedJobs=jobs.filter(job=>job.status==='archived').length;const activeCandidates=candidates.filter(c=>!['hired','rejected'].includes(c.stage)).length;const hiredCandidates=candidates.filter(c=>c.stage==='hired').length;const rejectedCandidates=candidates.filter(c=>c.stage==='rejected').length;const recentApplications=candidates.filter(c=>{const appliedDate=new Date(c.appliedAt);return appliedDate>=weekAgo;}).length;const todayApplications=candidates.filter(c=>{const appliedDate=new Date(c.appliedAt);return appliedDate>=today;}).length;const pendingReviews=candidates.filter(c=>['screen','tech'].includes(c.stage)).length;const newStats={totalJobs:jobs.length,activeJobs,archivedJobs,totalCandidates:candidates.length,activeCandidates,hiredCandidates,rejectedCandidates,recentApplications,todayApplications,totalAssessments:0,pendingReviews};console.log('Dashboard stats:',newStats);setStats(newStats);setLastUpdated(new Date());}catch(error){console.error('Error loading dashboard data:',error);}finally{setLoading(false);}},[]);useEffect(()=>{loadDashboardData();},[loadDashboardData]);const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{month:'short',day:'numeric'});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Loading dashboard...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-gray-900 dark:text-white mb-2\",children:[\"Welcome back, \",user.name,\"!\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Here's what's happening with your hiring pipeline today.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[\"Last updated: \",lastUpdated.toLocaleTimeString()]}),/*#__PURE__*/_jsxs(\"button\",{onClick:loadDashboardData,disabled:loading,className:\"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(ArrowPathIcon,{className:\"w-4 h-4 mr-2 \".concat(loading?'animate-spin':'')}),\"Refresh\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.1},className:\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg\",children:/*#__PURE__*/_jsx(BriefcaseIcon,{className:\"w-6 h-6 text-blue-600 dark:text-blue-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Total Jobs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:stats.totalJobs})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.2},className:\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-green-100 dark:bg-green-900 rounded-lg\",children:/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"w-6 h-6 text-green-600 dark:text-green-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Active Jobs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:stats.activeJobs})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.3},className:\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg\",children:/*#__PURE__*/_jsx(UserGroupIcon,{className:\"w-6 h-6 text-purple-600 dark:text-purple-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Total Candidates\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:stats.totalCandidates})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.4},className:\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg\",children:/*#__PURE__*/_jsx(ClockIcon,{className:\"w-6 h-6 text-yellow-600 dark:text-yellow-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Active Pipeline\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:stats.activeCandidates})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.5},className:\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg\",children:/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"w-6 h-6 text-indigo-600 dark:text-indigo-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"This Week\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:stats.recentApplications})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.6},className:\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-emerald-100 dark:bg-emerald-900 rounded-lg\",children:/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"w-6 h-6 text-emerald-600 dark:text-emerald-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Hired\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:stats.hiredCandidates})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.7},className:\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg\",children:/*#__PURE__*/_jsx(ClockIcon,{className:\"w-6 h-6 text-orange-600 dark:text-orange-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Today\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:stats.todayApplications})]})]})})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.6},className:\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 dark:text-white mb-4\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/jobs\",className:\"flex items-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors\",children:[/*#__PURE__*/_jsx(BriefcaseIcon,{className:\"w-8 h-8 text-blue-600 dark:text-blue-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900 dark:text-white\",children:\"Manage Jobs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Create and edit job postings\"})]})]}),/*#__PURE__*/_jsxs(Link,{to:\"/candidates\",className:\"flex items-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors\",children:[/*#__PURE__*/_jsx(UserGroupIcon,{className:\"w-8 h-8 text-green-600 dark:text-green-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900 dark:text-white\",children:\"Review Candidates\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Manage candidate pipeline\"})]})]}),/*#__PURE__*/_jsxs(Link,{to:\"/assessments\",className:\"flex items-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"w-8 h-8 text-purple-600 dark:text-purple-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900 dark:text-white\",children:\"Create Assessment\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Build custom assessments\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.7},className:\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 dark:text-white\",children:\"Recent Jobs\"}),/*#__PURE__*/_jsx(Link,{to:\"/jobs\",className:\"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium\",children:\"View All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:recentJobs.map(job=>/*#__PURE__*/_jsxs(Link,{to:\"/jobs/\".concat(job.id),className:\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900 dark:text-white\",children:job.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[job.location,\" \\u2022 Created \",formatDate(job.createdAt)]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded-full \".concat(job.status==='active'?'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200':'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'),children:job.status})]},job.id))})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.8},className:\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 dark:text-white\",children:\"Recent Applications\"}),/*#__PURE__*/_jsx(Link,{to:\"/candidates\",className:\"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium\",children:\"View All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:recentCandidates.map(candidate=>/*#__PURE__*/_jsxs(Link,{to:\"/candidates/\".concat(candidate.id),className:\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-medium text-sm mr-3\",children:candidate.name.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900 dark:text-white\",children:candidate.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[\"Applied \",formatDate(candidate.appliedAt)]})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded-full \".concat(candidate.stage==='applied'?'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200':candidate.stage==='screen'?'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200':candidate.stage==='tech'?'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200':candidate.stage==='offer'?'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200':candidate.stage==='hired'?'bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200':'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'),children:candidate.stage})]},candidate.id))})]})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.9},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-6\",children:\"Analytics Overview\"}),/*#__PURE__*/_jsx(AnalyticsDashboard,{})]})]})});};export default HRDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}