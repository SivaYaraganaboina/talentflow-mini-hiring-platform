{"ast":null,"code":"import _objectSpread from\"C:/Users/shiva/Desktop/talentflow-mini-hiring-platform/TalentFlow/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import Modal from'./ui/Modal';import Button from'./ui/Button';import Input from'./ui/Input';import toast from'react-hot-toast';import{generateSlug,ensureUniqueSlug}from'../utils/jobUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const JobModal=_ref=>{let{isOpen,onClose,job,onSave}=_ref;const[title,setTitle]=useState('');const[slug,setSlug]=useState('');const[description,setDescription]=useState('');const[location,setLocation]=useState('');const[tags,setTags]=useState('');const[loading,setLoading]=useState(false);const[slugError,setSlugError]=useState('');// Update form when job changes\nuseEffect(()=>{if(job){var _job$tags;setTitle(job.title||'');setSlug(job.slug||'');setDescription(job.description||'');setLocation(job.location||'');setTags(((_job$tags=job.tags)===null||_job$tags===void 0?void 0:_job$tags.join(', '))||'');}else{setTitle('');setSlug('');setDescription('');setLocation('');setTags('');}setSlugError('');},[job,isOpen]);// Auto-generate slug from title\nuseEffect(()=>{if(title&&!job){const generatedSlug=generateSlug(title);setSlug(generatedSlug);}},[title,job]);const handleSave=async()=>{if(!title.trim()){toast.error('Job title is required');return;}if(!slug.trim()){toast.error('Job slug is required');return;}setLoading(true);setSlugError('');try{// Ensure slug is unique\nconst uniqueSlug=await ensureUniqueSlug(slug.trim(),job===null||job===void 0?void 0:job.id);const jobData={title:title.trim(),slug:uniqueSlug,description:description.trim(),location:location.trim(),tags:tags.split(',').map(t=>t.trim()).filter(Boolean)};if(job){// Edit existing job\nconst response=await fetch(\"/api/jobs/\".concat(job.id),{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify(jobData)});if(!response.ok)throw new Error('Failed to update job');toast.success('Job updated successfully!');}else{// Create new job\nconst response=await fetch('/api/jobs',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},jobData),{},{status:'active',order:Date.now()}))});if(!response.ok)throw new Error('Failed to create job');toast.success('Job created successfully!');}if(onSave)onSave(jobData);onClose();}catch(error){toast.error(job?'Failed to update job':'Failed to create job');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onClose:onClose,title:job?'Edit Job':'Create Job',size:\"lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(Input,{label:\"Job Title\",value:title,onChange:e=>setTitle(e.target.value),placeholder:\"Enter job title\",required:true,fullWidth:true}),/*#__PURE__*/_jsx(Input,{label:\"Job Slug\",value:slug,onChange:e=>setSlug(e.target.value),placeholder:\"job-slug-url\",helperText:\"URL-friendly identifier (auto-generated from title)\",error:slugError,required:true,fullWidth:true}),/*#__PURE__*/_jsx(Input,{label:\"Location\",value:location,onChange:e=>setLocation(e.target.value),placeholder:\"Enter location\",fullWidth:true}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:e=>setDescription(e.target.value),placeholder:\"Enter job description\",rows:4,className:\"input-base\"})]}),/*#__PURE__*/_jsx(Input,{label:\"Tags\",value:tags,onChange:e=>setTags(e.target.value),placeholder:\"React, TypeScript, Node.js\",helperText:\"Separate tags with commas\",fullWidth:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSave,loading:loading,children:job?'Update Job':'Create Job'})]})]})});};export default JobModal;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}